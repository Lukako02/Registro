<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Plataforma Educativa</title>
<style>
*{box-sizing:border-box}
body{margin:0;font-family:'Segoe UI',Tahoma,sans-serif;background:#f9fdf9;color:#1f2937}
:root{
  --primary:#2e7d32;    /* verde principal */
  --secondary:#66bb6a;  /* verde secundario */
  --accent:#f9a825;     
  --bg-card:#fff;
  --bg-soft:#e8f5e9;
  --success:#2e7d32;
}
header{
  background:linear-gradient(90deg,var(--primary),var(--secondary));
  color:#fff;
  padding:18px 40px;
  display:flex;
  justify-content:space-between;
  align-items:center;
  position:relative;
  box-shadow:0 4px 6px rgba(0,0,0,0.1);
}
.container{display:grid;grid-template-columns:260px 1fr;min-height:calc(100vh - 72px)}
.sidebar{background:var(--bg-card);padding:22px;box-shadow:1px 0 5px rgba(0,0,0,0.05)}
.menu a{display:block;padding:10px;text-decoration:none;color:#1f2937;border-radius:6px;margin-bottom:4px}
.menu a:hover{background:var(--bg-soft)}
.content{padding:32px}
.card{background:var(--bg-card);padding:24px;border-radius:16px;margin-bottom:25px;text-align:left;box-shadow:0 2px 4px rgba(0,0,0,0.05)}
label{font-weight:600;display:block;margin-top:12px}
input,select{width:100%;padding:10px;margin-top:6px;border:1px solid #c8e6c9;border-radius:8px}
button{margin-top:18px;padding:12px;width:100%;background:var(--primary);color:#fff;border:none;border-radius:12px;cursor:pointer;transition:0.3s}
button:hover{background:var(--secondary)}
.hidden{display:none}
.alert{padding:12px;background:var(--bg-soft);border-left:5px solid var(--primary);margin-bottom:15px}
.success{background:#e8f5e9;border-left-color:var(--success);color:var(--success)}
.dot{display:inline-block;width:10px;height:10px;border-radius:50%;background:var(--secondary);margin-right:6px}
#portada{max-width:500px;margin:60px auto;text-align:center}
#portada img{max-width:120px;margin-bottom:15px} /* Logo del colegio */
#portada button{width:auto;padding:10px 20px;font-size:16px;background:var(--primary);color:#fff;border-radius:12px}
#btnSalirHeader{
  padding:6px 12px;
  font-size:12px;
  border:none;
  border-radius:6px;
  cursor:pointer;
  background:#388e3c;
  color:#fff;
  margin-left:10px;
  transition:0.3s;
}
#btnSalirHeader:hover{background:#66bb6a;}
</style>
<script src="https://cdn.jsdelivr.net/npm/xlsx@0.18.5/dist/xlsx.full.min.js"></script>
</head>
<body>

<header>
   <img src="logo.png" alt="Logo Colegio" style="height:100px; margin-right:-200px;">
   <h1 style="margin:0; font-size:35px;">Unidad Educativa Fiscal "Dr. Francisco Campos Coello" </h1>
  <div style="display:flex;align-items:center;">
    <span id="userStatus">Estudiante / Docente</span>
    <button id="btnSalirHeader" class="hidden" onclick="salir()">Salir</button>
  </div>
</header>

<!-- PORTADA -->
<div id="portada" class="card">
  <!-- Logo del colegio -->
  <img src="logo.png" alt="Logo Colegio">
  
  <h1>üè´ Unidad Educativa Fiscal "Dr. Francisco Campos Coello"</h1>
  <p>Bienvenido a la plataforma educativa</p>
  <button onclick="entrarRegistro()">Registrarse</button>
</div>

<!-- CONTENIDO PRINCIPAL -->
<div class="container hidden" id="mainContainer">
  <aside class="sidebar">
    <h3>Men√∫</h3>
    <div class="menu">
      <a href="#" onclick="location.reload()">Inicio</a>
      <a href="#" onclick="mostrarDocente()">Panel Docente</a>
    </div>
  </aside>
  <main class="content">

    <!-- Registro Estudiante -->
    <div class="card hidden" id="registro">
      <h2> üë®‚ÄçüéìRegistro Estudiante</h2>
      <label>Nombre</label><input id="nombre" oninput="this.value=this.value.replace(/[^a-zA-Z√°√©√≠√≥√∫√Å√â√ç√ì√ö√±√ë ]/g,'')">
      <label>Apellido</label><input id="apellido" oninput="this.value=this.value.replace(/[^a-zA-Z√°√©√≠√≥√∫√Å√â√ç√ì√ö√±√ë ]/g,'')">
      <label>C√©dula</label><input id="cedula" maxlength="10" oninput="this.value=this.value.replace(/[^0-9]/g,'')">
      <label>Grado</label><input id="grado" oninput="this.value=this.value.replace(/[^0-9¬∞ ]/g,'')">
      <button onclick="registrar()">Continuar</button>
    </div>

    <!-- Selecci√≥n Especialidad -->
    <div class="card hidden" id="especialidadBox">
      <h2>Especialidad</h2>
      <select id="especialidad">
        <option value="">Seleccione</option>
        <option>Ciencias</option>
        <option>Inform√°tica</option>
        <option>Contabilidad</option>
      </select>
      <button onclick="continuarEspecialidad()">Continuar</button>
    </div>

    <!-- Enviar Actividad -->
    <div class="card hidden" id="actividades">
      <h2>Enviar Actividad</h2>
      <div class="alert" id="datos"></div>
      <label>Materia</label>
      <select id="materia"></select>
      <label>Fecha</label><input type="date" id="fecha">
      <label>Docente</label><input id="docente" oninput="this.value=this.value.replace(/[^a-zA-Z√°√©√≠√≥√∫√Å√â√ç√ì√ö√±√ë ]/g,'')">
      <label>üì∑ Evidencia (foto)</label><input type="file" id="foto" accept="image/*">
      <button onclick="enviar()">Enviar</button>
      <div class="alert success hidden" id="ok">Actividad enviada correctamente</div>
    </div>

    <!-- Login Docente -->
    <div class="card hidden" id="loginDocenteBox">
      <h2>üë®‚Äçüè´/üë©‚Äçüè´ Ingreso Docente</h2>
      <label>Usuario</label><input id="docUsuario">
      <label>Contrase√±a</label><input type="password" id="docClave">
      <label>C√©dula</label><input id="docCedula" maxlength="10" oninput="this.value=this.value.replace(/[^0-9]/g,'')">
      <button onclick="loginDocente()">Ingresar</button>
    </div>

    <!-- Panel Docente -->
    <div class="card hidden" id="docentePanel">
      <h2>üë©‚Äçüè´ Panel Docente</h2>
      <button onclick="exportarExcelXLSX()">üìÇ Exportar Excel (.xlsx)</button>
      <div id="listaDocente"></div>
    </div>

  </main>
</div>

<script>
const DOCENTE={usuario:'docente',clave:'12345',cedula:'9999999999'};
const MATERIAS={
  Ciencias:['Lengua','Matem√°tica','F√≠sica','Qu√≠mica','Biolog√≠a','Historia','Emprendimiento','Educaci√≥n F√≠sica'],
  Inform√°tica:['Lengua','Matem√°tica','F√≠sica','Qu√≠mica','Biolog√≠a','Historia','Emprendimiento','Educaci√≥n F√≠sica','Programaci√≥n','Redes','Ofim√°tica','Dise√±o'],
  Contabilidad:['Lengua','Matem√°tica','F√≠sica','Qu√≠mica','Biolog√≠a','Historia','Emprendimiento','Educaci√≥n F√≠sica','Contabilidad','Econom√≠a']
};
const Server={
  get(){return JSON.parse(localStorage.getItem('actividades')||'[]')},
  save(a){const arr=this.get();arr.push(a);localStorage.setItem('actividades',JSON.stringify(arr))}
};

// FUNCIONES PORTADA Y SALIR
function entrarRegistro(){
  portada.classList.add('hidden');
  mainContainer.classList.remove('hidden');
  registro.classList.remove('hidden');
  btnSalirHeader.classList.remove('hidden');
}
function salir(){
  mainContainer.classList.add('hidden');
  registro.classList.add('hidden');
  especialidadBox.classList.add('hidden');
  actividades.classList.add('hidden');
  loginDocenteBox.classList.add('hidden');
  docentePanel.classList.add('hidden');
  nombre.value=''; apellido.value=''; cedula.value=''; grado.value=''; especialidad.value='';
  materia.innerHTML=''; fecha.value=''; docente.value=''; foto.value=''; ok.classList.add('hidden');
  portada.classList.remove('hidden');
  btnSalirHeader.classList.add('hidden');
}

// FUNCIONES ESTUDIANTE Y DOCENTE
function registrar(){
  if(!nombre.value||!apellido.value||!cedula.value||!grado.value){alert('Complete todos los campos');return}
  registro.classList.add('hidden');
  especialidadBox.classList.remove('hidden');
}
function continuarEspecialidad(){
  if(!especialidad.value){alert('Seleccione especialidad');return}
  materia.innerHTML='';
  MATERIAS[especialidad.value].forEach(m=>{
    const o=document.createElement('option'); o.textContent=m; materia.appendChild(o);
  });
  especialidadBox.classList.add('hidden');
  actividades.classList.remove('hidden');
  datos.textContent=`${nombre.value} ${apellido.value} | ${grado.value} | ${especialidad.value}`;
}
function enviar(){
  if(!materia.value||!fecha.value||!docente.value){alert('Complete todos los campos');return}
  const fotoInput=document.getElementById('foto');
  let fotoURL='';
  if(fotoInput && fotoInput.files[0]){
    const reader=new FileReader();
    reader.onload=()=>{fotoURL=reader.result; guardarActividad(fotoURL);}
    reader.readAsDataURL(fotoInput.files[0]);
  } else {guardarActividad(fotoURL);}
}
function guardarActividad(fotoURL){
  Server.save({
    nombre:`${nombre.value} ${apellido.value}`,
    grado:grado.value,
    especialidad:especialidad.value,
    materia:materia.value,
    nota:'',
    foto:fotoURL
  });
  ok.classList.remove('hidden');
  setTimeout(()=>ok.classList.add('hidden'),3000);
}
function mostrarDocente(){
  registro.classList.add('hidden');
  especialidadBox.classList.add('hidden');
  actividades.classList.add('hidden');
  loginDocenteBox.classList.remove('hidden');
}
function loginDocente(){
  if(docUsuario.value!==DOCENTE.usuario||docClave.value!==DOCENTE.clave||docCedula.value!==DOCENTE.cedula){
    alert('Credenciales incorrectas'); return
  }
  loginDocenteBox.classList.add('hidden');
  docentePanel.classList.remove('hidden');
  cargarDocente();
}
function cargarDocente(){
  const acts=Server.get();
  listaDocente.innerHTML='';
  if(!acts.length){listaDocente.innerHTML='<p>No hay actividades</p>';return}
  acts.forEach((a,i)=>{
    listaDocente.innerHTML+=`
    <div class="card">
      <p><span class="dot"></span><b>${a.nombre}</b></p>
      <p>Grado: ${a.grado}</p>
      <p>Especialidad: ${a.especialidad}</p>
      <p>Materia: ${a.materia}</p>
      ${a.foto?`<img src="${a.foto}" style="max-width:100%;border-radius:8px;margin-top:8px">`:''}
      <label>Calificaci√≥n (0‚Äì10)</label>
      <input type="number" min="0" max="10" step="1" value="${a.nota||''}" onchange="calificar(${i},this.value)">
    </div>`;
  });
}
function calificar(i,valor){
  const acts=Server.get();
  if(valor<0||valor>10){alert('Nota inv√°lida');return}
  acts[i].nota=valor;
  localStorage.setItem('actividades',JSON.stringify(acts));
}
function exportarExcelXLSX(){
  const acts=Server.get();
  if(!acts.length){alert('No hay datos');return}
  const data=[['Nombre','Grado','Especialidad','Materia','Nota']];
  acts.forEach(a=>data.push([a.nombre,a.grado,a.especialidad,a.materia,a.nota]));
  const wb=XLSX.utils.book_new();
  const ws=XLSX.utils.aoa_to_sheet(data);
  ws['!cols']=[{wch:28},{wch:12},{wch:18},{wch:25},{wch:10}];
  XLSX.utils.book_append_sheet(wb,ws,'Notas');
  XLSX.writeFile(wb,'Reporte_Notas.xlsx');
}
</script>

</body>
</html>
